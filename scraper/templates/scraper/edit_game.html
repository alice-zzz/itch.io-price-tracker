{% extends "scraper/base.html" %}
{% block title %}Edit {{ game.title }}{% endblock %}
{% block content %}

<h1>Edit Targets for {{ game.title }}</h1>

<form method="post">
    {% csrf_token %}
    
    <div class="form-group">
        <label for="target_price">Target Price ($):</label>
        <input type="number" 
               step="0.01" 
               name="target_price" 
               id="target_price" 
               value="{{ game.target_price|default:'' }}" 
               class="small-input">
    </div>
    <br>
    <div class="form-group">
        <label for="target_discount">Target Discount (%):</label>
        <input type="number" 
               name="target_discount" 
               id="target_discount" 
               value="{{ game.target_discount|default:'' }}" 
               class="small-input">
    </div>
    <br>
    <button type="submit" class="small-button">Save Targets</button>
    <a href="{% url 'game_detail' game.pk %}">
        <button type="button" class="small-button">Cancel</button>
    </a>
</form>

<div class="current-price">
    <h3>Current Price Info:</h3>
    {% if game.prices.exists %}
        {% with latest=game.prices.first %}
            <p>Current Price: ${{ latest.current_price }}</p>
            {% if latest.discount %}
                <p>Current Discount: {{ latest.discount }}%</p>
            {% endif %}
        {% endwith %}
    {% endif %}
</div>

{% endblock %}